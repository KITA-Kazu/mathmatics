<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÔºëÊ¨°‰∏çÂÆöÊñπÁ®ãÂºè„Å´Âêë„Åã„ÅÜ„Åü„ÇÅ„ÅÆÂü∫Á§éÂäõ„Ç¢„ÉÉ„Éó„Éà„É¨„Éº„Éã„É≥„Ç∞</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap');

        body {
            font-family: 'Kosugi Maru', sans-serif;
            background: linear-gradient(135deg, #f06d06, #f7d63d, #6ef780, #3de0f7);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #333;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.7);
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 30px 50px;
            border-radius: 25px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 800px;
            width: 90%;
            backdrop-filter: blur(5px);
            border: 3px solid #ffcc00;
        }

        h1 {
            color: #e94e77;
            font-size: 2.5em;
            margin-bottom: 30px;
            position: relative;
            animation: bounceIn 1s ease-out;
            text-shadow: 3px 3px 5px rgba(0,0,0,0.2);
        }

        h1::after {
            content: '‚ú®';
            position: absolute;
            top: -10px;
            right: -20px;
            font-size: 0.8em;
            transform: rotate(20deg);
        }

        .category-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
        }

        .category-button {
            background-color: #ffd166;
            color: #fff;
            border: none;
            border-radius: 15px;
            padding: 20px 30px;
            font-size: 1.3em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
            width: calc(33% - 20px);
            min-width: 250px;
            box-sizing: border-box;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .category-button:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.2);
            background-color: #ffb74d;
        }

        .category-button.completed {
            background-color: #7ed957; /* ÂÆå‰∫ÜÊôÇ„ÅÆËâ≤ */
            cursor: default;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1), inset 0 0 10px rgba(255,255,255,0.5);
        }

        .category-button.completed:hover {
            transform: none;
            background-color: #7ed957;
        }

        .quiz-section {
            display: none;
            background-color: #fce4ec;
            padding: 30px;
            border-radius: 20px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            border: 2px dashed #ff80ab;
        }

        .quiz-section h2 {
            color: #e94e77;
            margin-bottom: 25px;
            font-size: 1.8em;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
        }

        .question {
            font-size: 1.4em;
            margin-bottom: 25px;
            color: #555;
            text-align: left;
        }

        .options label {
            display: block;
            background-color: #ffe082;
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            font-size: 1.1em;
            color: #444;
            border: 1px solid #ffcc80;
        }

        .options label:hover {
            background-color: #ffd54f;
            transform: translateX(5px);
        }

        .options input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.3);
            vertical-align: middle;
        }

        .quiz-navigation {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
        }

        .quiz-navigation button {
            background-color: #81c784;
            color: #fff;
            border: none;
            border-radius: 10px;
            padding: 12px 25px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }

        .quiz-navigation button:hover {
            background-color: #66bb6a;
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }

        #check-answer-btn {
            background-color: #ff8a65;
        }
        #check-answer-btn:hover {
            background-color: #ff7043;
        }

        #back-to-categories {
            background-color: #90a4ae;
        }
        #back-to-categories:hover {
            background-color: #78909c;
        }

        .result-message {
            font-size: 1.5em;
            color: #e91e63;
            margin-top: 20px;
            font-weight: bold;
            animation: fadeInScale 1s ease-out;
            text-shadow: 2px 2px 3px rgba(0,0,0,0.1);
        }

        .explanation {
            background-color: #e3f2fd;
            border-left: 5px solid #2196f3;
            padding: 15px;
            margin-top: 20px;
            text-align: left;
            font-size: 1.1em;
            color: #333;
            line-height: 1.6;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .explanation strong {
            color: #1976d2;
        }

        #final-message {
            font-size: 3em;
            color: #4CAF50;
            margin-top: 50px;
            font-weight: bold;
            display: none;
            animation: tada 1.5s ease infinite;
            text-shadow: 4px 4px 6px rgba(0,0,0,0.3);
            position: relative;
        }
        #final-message::before, #final-message::after {
            content: 'üéâ';
            position: absolute;
            font-size: 0.6em;
            animation: floatUpDown 2s ease-in-out infinite;
        }
        #final-message::before { left: -40px; top: 0; }
        #final-message::after { right: -40px; bottom: 0; animation-delay: 0.5s; }


        @keyframes bounceIn {
            0%, 20%, 40%, 60%, 80%, 100% {
                -webkit-animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
                animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            }
            0% {
                opacity: 0;
                -webkit-transform: scale3d(.3, .3, .3);
                transform: scale3d(.3, .3, .3);
            }
            20% {
                -webkit-transform: scale3d(1.1, 1.1, 1.1);
                transform: scale3d(1.1, 1.1, 1.1);
            }
            40% {
                -webkit-transform: scale3d(.9, .9, .9);
                transform: scale3d(.9, .9, .9);
            }
            60% {
                opacity: 1;
                -webkit-transform: scale3d(1.03, 1.03, 1.03);
                transform: scale3d(1.03, 1.03, 1.03);
            }
            80% {
                -webkit-transform: scale3d(.97, .97, .97);
                transform: scale3d(.97, .97, .97);
            }
            100% {
                opacity: 1;
                -webkit-transform: scale3d(1, 1, 1);
                transform: scale3d(1, 1, 1);
            }
        }

        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes tada {
            0% { transform: scale(1); }
            10% { transform: scale(0.9) rotate(-3deg); }
            20% { transform: scale(0.9) rotate(-3deg); }
            30% { transform: scale(1.1) rotate(3deg); }
            40% { transform: scale(1.1) rotate(-3deg); }
            50% { transform: scale(1.1) rotate(3deg); }
            60% { transform: scale(1.1) rotate(-3deg); }
            70% { transform: scale(1.1) rotate(3deg); }
            80% { transform: scale(1.1) rotate(-3deg); }
            90% { transform: scale(1.1) rotate(3deg); }
            100% { transform: scale(1); }
        }

        @keyframes floatUpDown {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

    </style>
</head>
<body>
    <div class="container">
        <h1>ÔºëÊ¨°‰∏çÂÆöÊñπÁ®ãÂºè„Å´Âêë„Åã„ÅÜ„Åü„ÇÅ„ÅÆÂü∫Á§éÂäõ„Ç¢„ÉÉ„Éó„Éà„É¨„Éº„Éã„É≥„Ç∞</h1>

        <div class="category-buttons">
            <button class="category-button" data-category="moji" id="btn-moji">‚ë† ÊñáÂ≠óÂºè„ÉªÊñπÁ®ãÂºè„ÅÆÊâ±„ÅÑÊñπ</button>
            <button class="category-button" data-category="hi" id="btn-hi">‚ë° ÊØî„Å®ÊØî‰æã„ÅÆÁêÜËß£</button>
            <button class="category-button" data-category="seisu" id="btn-seisu">‚ë¢ Êï¥Êï∞„ÅÆÊÄßË≥™</button>
        </div>

        <div id="quiz-section" class="quiz-section">
            <h2 id="quiz-title"></h2>
            <div id="question-area">
                <p class="question" id="current-question"></p>
                <div class="options" id="options-area">
                    <!-- Options will be loaded here by JavaScript -->
                </div>
            </div>
            <p id="result-message" class="result-message"></p>
            <div id="explanation-area" class="explanation" style="display: none;">
                <!-- Explanation will be loaded here by JavaScript -->
            </div>
            <div class="quiz-navigation">
                <button id="check-answer-btn">Ëß£Á≠î„Åô„Çã</button>
                <button id="next-question-or-retry" style="display: none;">Ê¨°„ÅÆÂïèÈ°å„Å∏</button>
                <button id="back-to-categories">„Ç´„ÉÜ„Ç¥„É™„Éº„Å´Êàª„Çã</button>
            </div>
        </div>

        <p id="final-message">Now, you're ready! üéâ</p>
    </div>

    <script>
        const categories = {
            moji: {
                title: "‚ë† ÊñáÂ≠óÂºè„ÉªÊñπÁ®ãÂºè„ÅÆÊâ±„ÅÑÊñπ",
                questions: [
                    { q: "x - 5 = 12 „ÇíËß£„Åç„Å™„Åï„ÅÑ„ÄÇ", options: ["x = 7", "x = 17", "x = -7", "x = -17"], answer: 1, explanation: "ÊñπÁ®ãÂºè„ÅØ‰∏°Ëæ∫„Å´Âêå„ÅòÊï∞„ÇíË∂≥„Åó„Åü„ÇäÂºï„ÅÑ„Åü„Çä„Åó„Å¶„ÇÇÊàê„ÇäÁ´ã„Å°„Åæ„Åô„ÄÇx - 5 = 12 „ÅÆ‰∏°Ëæ∫„Å´5„ÇíË∂≥„Åô„Å®„ÄÅx = 12 + 5 = 17 „Å®„Å™„Çä„Åæ„Åô„ÄÇ" },
                    { q: "3x + 4 = 19 „ÇíËß£„Åç„Å™„Åï„ÅÑ„ÄÇ", options: ["x = 5", "x = 6", "x = 4", "x = 3"], answer: 0, explanation: "„Åæ„Åö„ÄÅ‰∏°Ëæ∫„Åã„Çâ4„ÇíÂºï„Åç„Åæ„Åô„ÄÇ3x = 19 - 4 = 15„ÄÇÊ¨°„Å´„ÄÅ‰∏°Ëæ∫„Çí3„ÅßÂâ≤„Çã„Å®„ÄÅx = 15 / 3 = 5 „Å®„Å™„Çä„Åæ„Åô„ÄÇ" },
                    { q: "2(x + 3) = 14 „ÇíËß£„Åç„Å™„Åï„ÅÑ„ÄÇ", options: ["x = 4", "x = 5", "x = 6", "x = 7"], answer: 0, explanation: "„Åæ„Åö„ÄÅÂàÜÈÖçÊ≥ïÂâá„Çí‰Ωø„Å£„Å¶Êã¨Âºß„ÇíÂ§ñ„Åó„Åæ„Åô„ÄÇ2x + 6 = 14„ÄÇÊ¨°„Å´„ÄÅ‰∏°Ëæ∫„Åã„Çâ6„ÇíÂºï„Åè„Å®„ÄÅ2x = 8„ÄÇÊúÄÂæå„Å´‰∏°Ëæ∫„Çí2„ÅßÂâ≤„Çã„Å®„ÄÅx = 4 „Å®„Å™„Çä„Åæ„Åô„ÄÇ" },
                    { q: "x„ÇíÊ∂àÂéª„Åó„Å¶y„Å´„Å§„ÅÑ„Å¶Ëß£„Åç„Å™„Åï„ÅÑ„ÄÇ\nx = y + 3\n2x + y = 12", options: ["y = 1", "y = 2", "y = 3", "y = 4"], answer: 1, explanation: "‰∏ä„ÅÆÂºè„Çí‰∏ã„ÅÆÂºè„Å´‰ª£ÂÖ•„Åó„Åæ„Åô„ÄÇ2(y + 3) + y = 12„ÄÇÂàÜÈÖçÊ≥ïÂâá„ÅßÊã¨Âºß„ÇíÂ§ñ„Åó„ÄÅ2y + 6 + y = 12„ÄÇÊï¥ÁêÜ„Åô„Çã„Å® 3y + 6 = 12„ÄÇ‰∏°Ëæ∫„Åã„Çâ6„ÇíÂºï„Åè„Å® 3y = 6„ÄÇ‰∏°Ëæ∫„Çí3„ÅßÂâ≤„Çã„Å® y = 2 „Å®„Å™„Çä„Åæ„Åô„ÄÇ" },
                    { q: "Ê¨°„ÅÆÂºè„ÇíÁ∞°Âçò„Å´„Åó„Å™„Åï„ÅÑ: 5a + 3b - 2a + 7b", options: ["3a + 10b", "7a + 10b", "3a + 4b", "7a + 4b"], answer: 0, explanation: "ÂêåÈ°ûÈ†Ö„Çí„Åæ„Å®„ÇÅ„Åæ„Åô„ÄÇa„ÅÆÈ†Ö: 5a - 2a = 3a„ÄÇb„ÅÆÈ†Ö: 3b + 7b = 10b„ÄÇ„Åó„Åü„Åå„Å£„Å¶„ÄÅ3a + 10b „Å®„Å™„Çä„Åæ„Åô„ÄÇ" }
                ]
            },
            hi: {
                title: "‚ë° ÊØî„Å®ÊØî‰æã„ÅÆÁêÜËß£",
                questions: [
                    { q: "2 : 3 = x : 9 „ÅÆ„Å®„Åç„ÄÅx„ÅÆÂÄ§„ÇíÊ±Ç„ÇÅ„Å™„Åï„ÅÑ„ÄÇ", options: ["x = 6", "x = 8", "x = 10", "x = 12"], answer: 0, explanation: "ÊØî„ÅÆÂÄ§„ÅØÁ≠â„Åó„ÅÑ„ÅÆ„Åß„ÄÅ2/3 = x/9 „Å®„Å™„Çä„Åæ„Åô„ÄÇ‰∏°Ëæ∫„Å´9„Çí„Åã„Åë„Çã„Å® x = (2/3) * 9 = 6 „Å®„Å™„Çä„Åæ„Åô„ÄÇ„Åæ„Åü„ÅØ„ÄÅÂÜÖÈ†Ö„ÅÆÁ©ç„Å®Â§ñÈ†Ö„ÅÆÁ©ç„ÅåÁ≠â„Åó„ÅÑ„ÅÆ„Åß„ÄÅ3x = 2 * 9 = 18„ÄÇ„Çà„Å£„Å¶ x = 6 „Å®„Å™„Çä„Åæ„Åô„ÄÇ" },
                    { q: "12ÂÄã„ÅÆ„É™„É≥„Ç¥„ÇíA„Åï„Çì„Å®B„Åï„Çì„Åß2:1„Å´ÂàÜ„Åë„Çã„Å®„Åç„ÄÅA„Åï„Çì„ÅØ‰ΩïÂÄã„ÇÇ„Çâ„Åà„Åæ„Åô„ÅãÔºü", options: ["4ÂÄã", "6ÂÄã", "8ÂÄã", "10ÂÄã"], answer: 2, explanation: "A„Åï„Çì„Å®B„Åï„Çì„ÅßÂàÜ„Åë„ÇãÊØî„ÅØ2:1„Å™„ÅÆ„Åß„ÄÅÂÖ®‰Ωì„ÅÆÂâ≤Âêà„ÅØ2+1=3„Å®„Å™„Çä„Åæ„Åô„ÄÇA„Åï„Çì„ÅÆÂâ≤Âêà„ÅØ2/3„Å™„ÅÆ„Åß„ÄÅ12ÂÄã„ÅÆ2/3„ÅØ 12 * (2/3) = 8ÂÄã „Å®„Å™„Çä„Åæ„Åô„ÄÇ" },
                    { q: "y„ÅØx„Å´ÊØî‰æã„Åó„ÄÅx = 3 „ÅÆ„Å®„Åç y = 15 „Åß„Åô„ÄÇÊØî‰æãÂÆöÊï∞„ÇíÊ±Ç„ÇÅ„Å™„Åï„ÅÑ„ÄÇ", options: ["3", "4", "5", "6"], answer: 2, explanation: "y„ÅØx„Å´ÊØî‰æã„Åô„Çã„ÅÆ„Åß„ÄÅy = ax (a„ÅØÊØî‰æãÂÆöÊï∞) „ÅÆÈñ¢‰øÇ„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇx = 3, y = 15 „Çí‰ª£ÂÖ•„Åô„Çã„Å®„ÄÅ15 = a * 3 „Å®„Å™„Çä„ÄÅa = 15 / 3 = 5 „Å®„Å™„Çä„Åæ„Åô„ÄÇ" },
                    { q: "y„ÅØx„Å´ÊØî‰æã„Åó„ÄÅx = 2 „ÅÆ„Å®„Åç y = 8 „Åß„Åô„ÄÇy = 20 „ÅÆ„Å®„Åç„ÅÆx„ÅÆÂÄ§„ÇíÊ±Ç„ÇÅ„Å™„Åï„ÅÑ„ÄÇ", options: ["x = 4", "x = 5", "x = 6", "x = 7"], answer: 1, explanation: "„Åæ„ÅöÊØî‰æãÂÆöÊï∞„ÇíÊ±Ç„ÇÅ„Åæ„Åô„ÄÇy = ax „Å´ x = 2, y = 8 „Çí‰ª£ÂÖ•„Åô„Çã„Å®„ÄÅ8 = a * 2 „Å™„ÅÆ„Åß a = 4„ÄÇÊØî‰æã„ÅÆÂºè„ÅØ y = 4x „Å®„Å™„Çä„Åæ„Åô„ÄÇÊ¨°„Å´„ÄÅy = 20 „Çí‰ª£ÂÖ•„Åô„Çã„Å®„ÄÅ20 = 4x „Å®„Å™„Çä„ÄÅx = 20 / 4 = 5 „Å®„Å™„Çä„Åæ„Åô„ÄÇ" },
                    { q: "A„ÅÆÈáè„ÅåB„ÅÆÈáè„ÅÆ3ÂÄç„Åß„ÅÇ„Çã„Å®„Åç„ÄÅA„Å®B„ÅÆÊØî„ÇíÊúÄ„ÇÇÁ∞°Âçò„Å™Êï¥Êï∞ÊØî„ÅßË°®„Åó„Å™„Åï„ÅÑ„ÄÇ", options: ["1 : 3", "3 : 1", "2 : 3", "3 : 2"], answer: 1, explanation: "B„ÅÆÈáè„Çí1„Å®„Åô„Çã„Å®„ÄÅA„ÅÆÈáè„ÅØ„Åù„ÅÆ3ÂÄç„Å™„ÅÆ„Åß3„Å®„Å™„Çä„Åæ„Åô„ÄÇ„Åó„Åü„Åå„Å£„Å¶„ÄÅA:B = 3:1 „Å®„Å™„Çä„Åæ„Åô„ÄÇ" }
                ]
            },
            seisu: {
                title: "‚ë¢ Êï¥Êï∞„ÅÆÊÄßË≥™",
                questions: [
                    { q: "18„ÅÆÊ≠£„ÅÆÁ¥ÑÊï∞„Çí„Åô„Åπ„Å¶Êåô„Åí„Å™„Åï„ÅÑ„ÄÇ", options: ["[1, 2, 3, 6, 9, 18]", "[1, 2, 3, 4, 9, 18]", "[1, 2, 6, 9, 18]", "[1, 3, 6, 9, 18]"], answer: 0, explanation: "Á¥ÑÊï∞„Å®„ÅØ„ÄÅ„Åù„ÅÆÊï∞„ÇíÂâ≤„ÇäÂàá„Çã„Åì„Å®„Åå„Åß„Åç„ÇãÊï¥Êï∞„Åß„Åô„ÄÇ18„ÇíÂâ≤„ÇäÂàá„Çå„ÇãÊï∞„ÅØ„ÄÅ1, 2, 3, 6, 9, 18 „Åß„Åô„ÄÇ" },
                    { q: "24„Å®36„ÅÆÊúÄÂ§ßÂÖ¨Á¥ÑÊï∞„ÇíÊ±Ç„ÇÅ„Å™„Åï„ÅÑ„ÄÇ", options: ["6", "8", "12", "18"], answer: 2, explanation: "24„ÅÆÁ¥ÑÊï∞: 1, 2, 3, 4, 6, 8, 12, 24„ÄÇ36„ÅÆÁ¥ÑÊï∞: 1, 2, 3, 4, 6, 9, 12, 18, 36„ÄÇÂÖ±ÈÄö„Åô„ÇãÁ¥ÑÊï∞„ÅÆ‰∏≠„ÅßÊúÄ„ÇÇÂ§ß„Åç„ÅÑ„ÅÆ„ÅØ12„Åß„Åô„ÄÇ" },
                    { q: "6„Å®9„ÅÆÊúÄÂ∞èÂÖ¨ÂÄçÊï∞„ÇíÊ±Ç„ÇÅ„Å™„Åï„ÅÑ„ÄÇ", options: ["18", "36", "54", "6"], answer: 0, explanation: "6„ÅÆÂÄçÊï∞: 6, 12, 18, 24, 30, ...„ÄÇ9„ÅÆÂÄçÊï∞: 9, 18, 27, 36, ...„ÄÇÂÖ±ÈÄö„Åô„ÇãÂÄçÊï∞„ÅÆ‰∏≠„ÅßÊúÄ„ÇÇÂ∞è„Åï„ÅÑ„ÅÆ„ÅØ18„Åß„Åô„ÄÇ" },
                    { q: "Á¥†Êï∞„Åß„ÅÇ„Çã„ÇÇ„ÅÆ„Çí„Åô„Åπ„Å¶ÈÅ∏„Å≥„Å™„Åï„ÅÑ: 1, 2, 9, 13, 21", options: ["[1, 2, 13]", "[2, 13]", "[2, 9, 13]", "[1, 2, 9, 13]"], answer: 1, explanation: "Á¥†Êï∞„Å®„ÅØ„ÄÅ1„Å®„Åù„ÅÆÊï∞Ëá™Ë∫´‰ª•Â§ñ„Å´Ê≠£„ÅÆÁ¥ÑÊï∞„ÇíÊåÅ„Åü„Å™„ÅÑËá™ÁÑ∂Êï∞„Åß„Åô„ÄÇ1„ÅØÁ¥†Êï∞„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ2„ÅØÂîØ‰∏Ä„ÅÆÂÅ∂Êï∞„ÅÆÁ¥†Êï∞„Åß„Åô„ÄÇ9„ÅØ3„ÅßÂâ≤„Çå„Çã„ÅÆ„ÅßÁ¥†Êï∞„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ13„ÅØÁ¥†Êï∞„Åß„Åô„ÄÇ21„ÅØ3„Å®7„ÅßÂâ≤„Çå„Çã„ÅÆ„ÅßÁ¥†Êï∞„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„Åó„Åü„Åå„Å£„Å¶„ÄÅÁ¥†Êï∞„ÅØ2„Å®13„Åß„Åô„ÄÇ" },
                    { q: "4„ÅßÂâ≤„Çã„Å®1‰Ωô„ÇãÊï∞„Çí„ÄÅÊï¥Êï∞n„Çí‰Ωø„Å£„Å¶Ë°®„Åó„Å™„Åï„ÅÑ„ÄÇ", options: ["4n", "4n + 1", "4n - 1", "n + 4"], answer: 1, explanation: "4„ÅßÂâ≤„ÇäÂàá„Çå„ÇãÊï∞„ÅØ4n„Å®Ë°®„Åõ„Åæ„Åô„ÄÇ„Åù„Çå„Å´1‰Ωô„Çã„Å®„ÅÑ„ÅÜ„Åì„Å®„ÅØ„ÄÅ4n„Å´1„ÇíË∂≥„Åõ„Å∞„Çà„ÅÑ„ÅÆ„Åß„ÄÅ4n + 1 „Å®„Å™„Çä„Åæ„Åô„ÄÇ (n„ÅØ0„Åæ„Åü„ÅØÊ≠£„ÅÆÊï¥Êï∞)" }
                ]
            }
        };

        const categoryButtons = document.querySelectorAll('.category-button');
        const quizSection = document.getElementById('quiz-section');
        const quizTitle = document.getElementById('quiz-title');
        const currentQuestionElem = document.getElementById('current-question');
        const optionsArea = document.getElementById('options-area');
        const checkAnswerButton = document.getElementById('check-answer-btn');
        const nextQuestionOrRetryButton = document.getElementById('next-question-or-retry');
        const backToCategoriesButton = document.getElementById('back-to-categories');
        const resultMessage = document.getElementById('result-message');
        const explanationArea = document.getElementById('explanation-area');
        const finalMessage = document.getElementById('final-message');

        let currentCategory = '';
        let currentQuestionIndex = 0;
        let completedCategories = {}; // „ÇØ„É™„Ç¢Áä∂ÊÖã„ÅØlocalStorage„Å´‰øùÂ≠ò„Åõ„Åö„ÄÅ„Éö„Éº„Ç∏„É≠„Éº„ÉâÊôÇ„ÅÆ„Åø„É™„Çª„ÉÉ„Éà

        // „Éö„Éº„Ç∏„É≠„Éº„ÉâÊôÇ„Å´„Éú„Çø„É≥„ÅÆÁä∂ÊÖã„ÇíÂàùÊúüÂåñ
        function initializeCategoryButtons() {
            Object.keys(categories).forEach(cat => {
                document.getElementById(`btn-${cat}`).classList.remove('completed');
            });
            completedCategories = {}; // ÂÜÖÈÉ®Áä∂ÊÖã„ÇÇ„É™„Çª„ÉÉ„Éà
            finalMessage.style.display = 'none'; // ÊúÄÁµÇ„É°„ÉÉ„Çª„Éº„Ç∏„ÇÇÈùûË°®Á§∫„Å´
            categoryButtons.forEach(button => {
                button.disabled = false; // „Éú„Çø„É≥„ÇíÊúâÂäπÂåñ
            });
        }
        initializeCategoryButtons(); // „Éö„Éº„Ç∏„É≠„Éº„ÉâÊôÇ„Å´ÂÆüË°å

        categoryButtons.forEach(button => {
            button.addEventListener('click', () => {
                // completed„ÇØ„É©„Çπ„ÅØ„Éö„Éº„Ç∏„É™„Éï„É¨„ÉÉ„Ç∑„É•„ÅßÊ∂à„Åà„Çã„ÅÆ„Åß„ÄÅ„Åì„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØ„ÅØ‰∏çË¶Å„Å´„Å™„Çã
                // if (button.classList.contains('completed')) {
                //     alert('„Åì„ÅÆ„Ç´„ÉÜ„Ç¥„É™„Éº„ÅØ„Åô„Åß„Å´„ÇØ„É™„Ç¢Ê∏à„Åø„Åß„ÅôÔºÅ');
                //     return;
                // }
                currentCategory = button.dataset.category;
                currentQuestionIndex = 0;
                showQuizSection();
                loadQuestion();
            });
        });

        checkAnswerButton.addEventListener('click', () => {
            checkAnswer();
        });

        nextQuestionOrRetryButton.addEventListener('click', () => {
            if (resultMessage.textContent.includes('ÊÆãÂøµÔºÅ')) {
                // ‰∏çÊ≠£Ëß£„Å†„Å£„Åü„ÅÆ„ÅßÊúÄÂàù„Åã„Çâ„ÇÑ„ÇäÁõ¥„Åó
                currentQuestionIndex = 0;
                resultMessage.textContent = '';
                explanationArea.style.display = 'none';
                loadQuestion();
            } else {
                // Ê≠£Ëß£„Å†„Å£„Åü„ÅÆ„ÅßÊ¨°„ÅÆÂïèÈ°å„Å∏
                currentQuestionIndex++;
                resultMessage.textContent = '';
                explanationArea.style.display = 'none';
                if (currentQuestionIndex < categories[currentCategory].questions.length) {
                    loadQuestion();
                } else {
                    // ÂÖ®ÂïèÊ≠£Ëß£
                    markCategoryCompleted();
                }
            }
        });


        backToCategoriesButton.addEventListener('click', () => {
            quizSection.style.display = 'none';
            document.querySelector('.category-buttons').style.display = 'flex';
            resultMessage.textContent = '';
            explanationArea.style.display = 'none';
        });

        function showQuizSection() {
            document.querySelector('.category-buttons').style.display = 'none';
            quizSection.style.display = 'block';
            resultMessage.textContent = '';
            explanationArea.style.display = 'none';
            quizTitle.textContent = categories[currentCategory].title;
            checkAnswerButton.style.display = 'inline-block';
            nextQuestionOrRetryButton.style.display = 'none';
        }

        function loadQuestion() {
            const questionData = categories[currentCategory].questions[currentQuestionIndex];
            currentQuestionElem.textContent = `Q${currentQuestionIndex + 1}. ${questionData.q}`;
            optionsArea.innerHTML = '';

            questionData.options.forEach((option, index) => {
                const label = document.createElement('label');
                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = 'quiz-option';
                radio.value = index;
                label.appendChild(radio);
                label.appendChild(document.createTextNode(option));
                optionsArea.appendChild(label);
            });

            checkAnswerButton.style.display = 'inline-block';
            nextQuestionOrRetryButton.style.display = 'none';
            resultMessage.textContent = '';
            explanationArea.style.display = 'none';

            document.querySelectorAll('input[name="quiz-option"]').forEach(radio => radio.checked = false);
        }

        function checkAnswer() {
            const selectedOption = document.querySelector('input[name="quiz-option"]:checked');
            const questionData = categories[currentCategory].questions[currentQuestionIndex];

            if (!selectedOption) {
                alert('ÈÅ∏ÊäûËÇ¢„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑÔºÅ');
                return;
            }

            const isCorrect = parseInt(selectedOption.value) === questionData.answer;

            explanationArea.innerHTML = `<strong>Ëß£Ë™¨:</strong><br>${questionData.explanation}`;
            explanationArea.style.display = 'block';

            if (isCorrect) {
                resultMessage.textContent = 'Ê≠£Ëß£ÔºÅÁ¥†Êô¥„Çâ„Åó„ÅÑÔºÅ‚ú®';
                nextQuestionOrRetryButton.textContent = 'Ê¨°„ÅÆÂïèÈ°å„Å∏';
            } else {
                resultMessage.textContent = 'ÊÆãÂøµÔºÅ„ÇÇ„ÅÜ‰∏ÄÂ∫¶ÊåëÊà¶„Åó„Çà„ÅÜÔºÅüí¶ („Åì„ÅÆ„Ç´„ÉÜ„Ç¥„É™„Éº„ÅÆÊúÄÂàù„Åã„Çâ„ÇÑ„ÇäÁõ¥„Åó)';
                nextQuestionOrRetryButton.textContent = 'ÊúÄÂàù„Åã„Çâ„ÇÑ„ÇäÁõ¥„Åô';
            }

            checkAnswerButton.style.display = 'none';
            nextQuestionOrRetryButton.style.display = 'inline-block';
        }

        function markCategoryCompleted() {
            resultMessage.textContent = 'ÂÖ®ÂïèÊ≠£Ëß£ÔºÅ„Åä„ÇÅ„Åß„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„ÅôÔºÅüéâ';
            document.getElementById(`btn-${currentCategory}`).classList.add('completed');
            completedCategories[currentCategory] = true; // ÂÜÖÈÉ®Áä∂ÊÖã„ÅØÊõ¥Êñ∞
            // localStorage.setItem('completedCategories', JSON.stringify(completedCategories)); // ‚òÖ„Åì„ÅÆË°å„ÇíÂâäÈô§
            nextQuestionOrRetryButton.style.display = 'none';
            checkAllCategoriesCompleted();
        }

        function checkAllCategoriesCompleted() {
            const allCompleted = Object.keys(categories).every(cat => completedCategories[cat]);
            if (allCompleted) {
                finalMessage.style.display = 'block';
                categoryButtons.forEach(button => {
                    button.disabled = true;
                });
            } else {
                finalMessage.style.display = 'none';
                categoryButtons.forEach(button => {
                    // „ÇØ„É™„Ç¢Ê∏à„Åø„ÅÆ„Éú„Çø„É≥„ÅØÁÑ°ÂäπÂåñ„ÄÅÊú™„ÇØ„É™„Ç¢„ÅÆ„Éú„Çø„É≥„ÅØÊúâÂäπÂåñÔºà„Åü„Å†„Åócompleted„ÇØ„É©„Çπ„ÅØÊÆã„ÅôÔºâ
                    // „Éö„Éº„Ç∏„É™„Éï„É¨„ÉÉ„Ç∑„É•„ÅßÂÖ®„Å¶„É™„Çª„ÉÉ„Éà„Åï„Çå„Çã„Åü„ÇÅ„ÄÅdisabledÁä∂ÊÖã„ÅÆÂà∂Âæ°„ÅØ‰∏çË¶Å„Å†„Åå„ÄÅÂøµ„ÅÆ„Åü„ÇÅ
                    button.disabled = button.classList.contains('completed');
                });
            }
        }

        // „Éö„Éº„Ç∏„É≠„Éº„ÉâÊôÇ„ÅÆÂàùÊúüÂåñ„ÅØinitializeCategoryButtons()„ÅßÂÆüÊñΩÊ∏à„Åø
        // checkAllCategoriesCompleted();
    </script>
</body>
</html>